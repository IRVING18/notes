# 一、绘制顺序
## 1.简述绘制过程
![](https://github.com/IRVING18/notes/blob/master/android/file/pc1.jpg)
## 2.具体作用
![](https://github.com/IRVING18/notes/blob/master/android/file/pc2.jpg)
## 3.例：
### 3.1 给EditText添加绿色背景
> 不能直接设置background，设置之后就没有下划线了，这时在draw()super之前drawcolor就ok了。
# 二、属性动画 Property Animation
## 1.ViewPropertyAnimator
### 1.1基本用法
```java
imageView.animate().translationZ(dpToPixel(15));
```
### 1.2方法汇总
![](https://github.com/IRVING18/notes/blob/master/android/file/anim1.jpg)
## 2.ObjectAnimator
### 2.1使用方式
- 1.如果是自定义控件，需要添加 setter / getter 方法；
- 2.用 ObjectAnimator.ofXXX(target, propertyName, value1, value2) 创建 ObjectAnimator 对象；
- 3.用 start() 方法执行动画。    
> target: 需要变化的view  
> propertyName: **需要变化的setterXX方法的XX**  
> value1,value2: 从value1变化到value2   

**注意：  
  1、propertyName和view中的属性参数没关系，只和setterXX后XX有关系。   
  2、一般如果需要绘制变化，需要在setterXX中invalidate();   **
## 3、通用方法
### 3.1 setDuration();
> 设置执行时间
### 3.2 setInterpolator();
> 设置速度设置器
## 4、设置监听器
### 4.1 解除监听器
- viewPropertyAnimator
> set{update}Listener(null)  
- ObjectAnimator
> remove{update}Listener();
### 4.2 其他差异
- 4.2.1 另外，由于 ObjectAnimator 支持使用 pause() 方法暂停，所以它还多了一个 addPauseListener() / removePauseListener() 的支持；
- 4.2.2 而 ViewPropertyAnimator 则独有 withStartAction() 和 withEndAction() 方法，可以设置一次性的动画开始或结束的监听。

注：   
这两个方法是 ViewPropertyAnimator 的独有方法。它们和 set/addListener() 中回调的 onAnimationStart() / onAnimationEnd() 相比起来的不同主要有两点：

withStartAction() / withEndAction() 是一次性的，在动画执行结束后就自动弃掉了，就算之后再重用 ViewPropertyAnimator 来做别的动画，用它们设置的回调也不会再被调用。而 set/addListener() 所设置的 AnimatorListener 是持续有效的，当动画重复执行时，回调总会被调用。

withEndAction() 设置的回调只有在动画正常结束时才会被调用，而在动画被取消时不会被执行。这点和 AnimatorListener.onAnimationEnd() 的行为是不一致的。
### 4.3 viewPropertyAnimator.setListenr()  -- ObjectAnimator.addListener()
- onAnimationStart(Animator)  
  > 当动画开始执行时，这个方法被调用。  
- onAnimationEnd(Animator animation) 
  > 当动画结束时，这个方法被调用。   
- onAnimationCancel(Animator animation)
  > 当动画被通过 cancel() 方法取消时，这个方法被调用。
- onAnimationRepeat(Animator animation)
  > 当动画通过 setRepeatMode() / setRepeatCount() 或 repeat() 方法重复执行时，这个方法被调用。
由于 ViewPropertyAnimator 不支持重复，所以这个方法对 ViewPropertyAnimator 相当于无效。
### 4.4 ViewPropertyAnimator.setUpdateListener() / ObjectAnimator.addUpdateListener()
